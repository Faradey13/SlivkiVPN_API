import { Injectable } from '@nestjs/common';
import { Action, Ctx, Update } from 'nestjs-telegraf';
import { Context, Markup } from 'telegraf';
import { PinoLogger } from 'nestjs-pino';

@Injectable()
@Update()
export class HelpHandler {
  constructor(private readonly logger: PinoLogger) {
    this.logger.setContext(HelpHandler.name);
  }
  @Action('help')
  async handleHelp(@Ctx() ctx: Context) {
    this.logger.info(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${ctx.from.id} –∑–∞—à–µ–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–º–æ—â–∏`);
    const text = `
–≠—Ç–æ—Ç –±–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º–∏ VPN-–ø–æ–¥–ø–∏—Å–∫–∞–º–∏.

üìù –î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ –∫–Ω–æ–ø–∫–µ "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

üîÑ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏: –î–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü–æ–¥–ø–∏—Å–∫–∞" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É", –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫ –ø—Ä–æ–¥–ª–µ–Ω–∏—è.

üåç –°–º–µ–Ω–∞ —Ä–µ–≥–∏–æ–Ω–∞ VPN: –í—ã –º–æ–∂–µ—Ç–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –º–µ–Ω—è—Ç—å —Ä–µ–≥–∏–æ–Ω, –ø–µ—Ä–µ–π–¥—è –≤ —Ä–∞–∑–¥–µ–ª "–ü–æ–¥–ø–∏—Å–∫–∞" –∏ –≤—ã–±—Ä–∞–≤ "–í—ã–±—Ä–∞—Ç—å —Ä–µ–≥–∏–æ–Ω". –†–µ–≥–∏–æ–Ω–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è –ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã.

üîë –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏: –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω –∫–ª—é—á –¥–ª—è —É–∂–µ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü–æ–¥–ø–∏—Å–∫–∏" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á".

üéÅ –ë–æ–Ω—É—Å—ã –¥–ª—è –≤–∞—Å –∏ –≤–∞—à–∏—Ö –¥—Ä—É–∑–µ–π: –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º, –ø–µ—Ä–µ–π–¥—è –≤ —Ä–∞–∑–¥–µ–ª "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞", –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞.

üí¨ –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "FAQ" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤.

ü§ñ –ü–æ –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ –Ω–∞—à—É –ø–æ–¥–¥–µ—Ä–∂–∫—É: @Slivki_VPN_support
    `;

    const keyboard = Markup.inlineKeyboard([
      [Markup.button.url('üí¨ FAQ', 'https://telegra.ph/CHasto-zadavaemye-voprosy-09-24-4')], // –ò–∑–º–µ–Ω–∏–ª–∏ –Ω–∞ button.url
      [Markup.button.url('üìÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è', 'https://telegra.ph/Instrukciya-po-oformleniyu-podpiski-09-24')],
      [
        Markup.button.url(
          'üì∫ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –°–º–∞—Ä—Ç –¢–í',
          'https://telegra.ph/Instrukciya-po-ustanovke-Slivki-VPN-na-Smart-TV-09-24',
        ),
      ],
      [Markup.button.callback('üì± –°–∫–∞—á–∞—Ç—å Outline', 'download_outline')],
      [Markup.button.callback('‚è™ –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', 'back_to_menu')],
    ]);

    await ctx.editMessageText(text, keyboard);
  }
}
